{"ast":null,"code":"var _jsxFileName = \"/Users/sanjith/ingrediate1/src/CameraDetection.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { Camera } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CameraDetection = ({\n  onIngredientsDetected\n}) => {\n  _s();\n  const [isCapturing, setIsCapturing] = useState(false);\n  const [processing, setProcessing] = useState(false);\n  const [permissionDenied, setPermissionDenied] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const knownIngredients = new Set(['apple', 'banana', 'orange', 'tomato', 'onion', 'garlic', 'potato', 'carrot', 'broccoli', 'pepper', 'cucumber', 'lettuce', 'spinach', 'mushroom', 'lemon', 'lime', 'cheese', 'bread', 'egg', 'chicken', 'beef', 'fish', 'rice', 'pasta', 'beans', 'nuts', 'herbs', 'spices', 'potato']);\n  const checkPermissions = async () => {\n    try {\n      // First, check if getUserMedia is supported\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        throw new Error('Camera API is not supported in your browser');\n      }\n\n      // Check if we already have permissions\n      const result = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'environment'\n        }\n      });\n\n      // If we get here, permission was granted\n      result.getTracks().forEach(track => track.stop()); // Clean up\n      return true;\n    } catch (err) {\n      console.error('Permission check failed:', err);\n      return false;\n    }\n  };\n  const startCamera = async () => {\n    setPermissionDenied(false);\n    try {\n      // Check if running on iOS\n      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\n      const constraints = {\n        video: {\n          facingMode: isIOS ? 'environment' : {\n            ideal: 'environment'\n          },\n          width: {\n            ideal: 1280\n          },\n          height: {\n            ideal: 720\n          }\n        }\n      };\n\n      // For iOS, we need to request permissions explicitly\n      if (isIOS) {\n        try {\n          await navigator.mediaDevices.getUserMedia({\n            video: true\n          });\n        } catch (err) {\n          setPermissionDenied(true);\n          return;\n        }\n      }\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n\n        // Special handling for iOS Safari\n        if (isIOS) {\n          try {\n            await videoRef.current.play();\n          } catch (playError) {\n            console.error('Playback failed:', playError);\n            stopCamera();\n            setPermissionDenied(true);\n            return;\n          }\n        }\n      }\n      setIsCapturing(true);\n    } catch (err) {\n      console.error('Error accessing camera:', err);\n      setPermissionDenied(true);\n    }\n  };\n  const stopCamera = () => {\n    var _videoRef$current;\n    if ((_videoRef$current = videoRef.current) !== null && _videoRef$current !== void 0 && _videoRef$current.srcObject) {\n      const tracks = videoRef.current.srcObject.getTracks();\n      tracks.forEach(track => track.stop());\n      videoRef.current.srcObject = null;\n    }\n    setIsCapturing(false);\n  };\n  const captureAndDetect = async () => {\n    if (!videoRef.current || !canvasRef.current) return;\n    setProcessing(true);\n    try {\n      const video = videoRef.current;\n      const canvas = canvasRef.current;\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) throw new Error('Could not get canvas context');\n\n      // Capture frame\n      ctx.drawImage(video, 0, 0);\n\n      // For testing purposes, simulate detection\n      // Remove this and uncomment the Google Vision code for production\n      setTimeout(() => {\n        const mockIngredients = ['tomato', 'onion', 'garlic'];\n        onIngredientsDetected(mockIngredients);\n        setProcessing(false);\n        stopCamera();\n      }, 2000);\n\n      /* Uncomment for actual Google Vision API usage\n      const blob = await new Promise<Blob>((resolve) => {\n        canvas.toBlob((b) => resolve(b!), 'image/jpeg', 0.8);\n      });\n       const detectedIngredients = await analyzeImageWithGoogleVision(blob);\n      onIngredientsDetected(detectedIngredients);\n      */\n    } catch (err) {\n      console.error('Error during capture:', err);\n      alert('Error capturing image. Please try again.');\n    } finally {\n      setProcessing(false);\n      stopCamera();\n    }\n  };\n  const handlePermissionError = () => {\n    if (permissionDenied) {\n      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 p-4 rounded-lg bg-red-50 border border-red-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-700 font-medium mb-2\",\n          children: \"Camera access was denied\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), isIOS ? /*#__PURE__*/_jsxDEV(\"ol\", {\n          className: \"text-sm text-red-600 list-decimal pl-4 space-y-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Open iPhone Settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Scroll down and tap Safari\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Scroll to \\\"Settings for Websites\\\"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Tap Camera\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Find this website and select \\\"Allow\\\"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Return to this page and refresh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-red-600\",\n          children: \"Please enable camera access in your browser settings and reload the page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          className: \"mt-3 px-4 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors\",\n          children: \"Refresh Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this);\n    }\n    return null;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), isCapturing ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"aspect-video bg-gray-800 rounded-lg overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          autoPlay: true,\n          playsInline: true,\n          muted: true // Required for iOS\n          ,\n          className: \"w-full h-full object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-24 h-24 rounded-full border-4 border-white opacity-50\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-4 left-0 right-0 flex justify-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: stopCamera,\n          className: \"p-3 rounded-full bg-red-500 text-white hover:bg-red-600\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: captureAndDetect,\n          disabled: processing,\n          className: \"p-3 rounded-full text-white hover:opacity-90\",\n          style: {\n            backgroundColor: processing ? '#B7B7A4' : '#6B705C'\n          },\n          children: processing ? 'Detecting...' : 'Capture'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startCamera,\n        className: \"flex items-center justify-center w-full p-3 rounded-lg space-x-2 transition-all hover:scale-105\",\n        style: {\n          backgroundColor: '#B7B7A4'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Camera, {\n          className: \"w-6 h-6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Scan Ingredients\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }, this), handlePermissionError()]\n    }, void 0, true), processing && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex items-center justify-center space-x-2 p-4 rounded-lg\",\n      style: {\n        backgroundColor: '#FFE8D6'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-4 h-4 rounded-full bg-gray-600 animate-pulse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-4 h-4 rounded-full bg-gray-600 animate-pulse delay-100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-4 h-4 rounded-full bg-gray-600 animate-pulse delay-200\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ml-2 text-gray-800\",\n        children: \"Processing image...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 5\n  }, this);\n};\n_s(CameraDetection, \"hMIjDAfRM6qR06/exsn5RaCHOHU=\");\n_c = CameraDetection;\nexport default CameraDetection;\nvar _c;\n$RefreshReg$(_c, \"CameraDetection\");","map":{"version":3,"names":["React","useState","useRef","Camera","jsxDEV","_jsxDEV","Fragment","_Fragment","CameraDetection","onIngredientsDetected","_s","isCapturing","setIsCapturing","processing","setProcessing","permissionDenied","setPermissionDenied","videoRef","canvasRef","knownIngredients","Set","checkPermissions","navigator","mediaDevices","getUserMedia","Error","result","video","facingMode","getTracks","forEach","track","stop","err","console","error","startCamera","isIOS","test","userAgent","constraints","ideal","width","height","stream","current","srcObject","play","playError","stopCamera","_videoRef$current","tracks","captureAndDetect","canvas","videoWidth","videoHeight","ctx","getContext","drawImage","setTimeout","mockIngredients","alert","handlePermissionError","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","reload","ref","style","display","autoPlay","playsInline","muted","disabled","backgroundColor","_c","$RefreshReg$"],"sources":["/Users/sanjith/ingrediate1/src/CameraDetection.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Camera } from 'lucide-react';\n\ninterface CameraDetectionProps {\n  onIngredientsDetected: (ingredients: string[]) => void;\n}\n\nconst CameraDetection: React.FC<CameraDetectionProps> = ({ onIngredientsDetected }) => {\n  const [isCapturing, setIsCapturing] = useState(false);\n  const [processing, setProcessing] = useState(false);\n  const [permissionDenied, setPermissionDenied] = useState(false);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  const knownIngredients = new Set([\n    'apple', 'banana', 'orange', 'tomato', 'onion', 'garlic',\n    'potato', 'carrot', 'broccoli', 'pepper', 'cucumber',\n    'lettuce', 'spinach', 'mushroom', 'lemon', 'lime',\n    'cheese', 'bread', 'egg', 'chicken', 'beef', 'fish',\n    'rice', 'pasta', 'beans', 'nuts', 'herbs', 'spices' , 'potato'\n  ]);\n\n  const checkPermissions = async () => {\n    try {\n      // First, check if getUserMedia is supported\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        throw new Error('Camera API is not supported in your browser');\n      }\n\n      // Check if we already have permissions\n      const result = await navigator.mediaDevices.getUserMedia({\n        video: { facingMode: 'environment' }\n      });\n      \n      // If we get here, permission was granted\n      result.getTracks().forEach(track => track.stop()); // Clean up\n      return true;\n    } catch (err) {\n      console.error('Permission check failed:', err);\n      return false;\n    }\n  };\n\n  const startCamera = async () => {\n    setPermissionDenied(false);\n    \n    try {\n      // Check if running on iOS\n      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\n      \n      const constraints = {\n        video: {\n          facingMode: isIOS ? 'environment' : { ideal: 'environment' },\n          width: { ideal: 1280 },\n          height: { ideal: 720 }\n        }\n      };\n  \n      // For iOS, we need to request permissions explicitly\n      if (isIOS) {\n        try {\n          await navigator.mediaDevices.getUserMedia({ video: true });\n        } catch (err) {\n          setPermissionDenied(true);\n          return;\n        }\n      }\n  \n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\n      \n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        \n        // Special handling for iOS Safari\n        if (isIOS) {\n          try {\n            await videoRef.current.play();\n          } catch (playError) {\n            console.error('Playback failed:', playError);\n            stopCamera();\n            setPermissionDenied(true);\n            return;\n          }\n        }\n      }\n      \n      setIsCapturing(true);\n    } catch (err) {\n      console.error('Error accessing camera:', err);\n      setPermissionDenied(true);\n    }\n  };\n\n  const stopCamera = () => {\n    if (videoRef.current?.srcObject) {\n      const tracks = (videoRef.current.srcObject as MediaStream).getTracks();\n      tracks.forEach(track => track.stop());\n      videoRef.current.srcObject = null;\n    }\n    setIsCapturing(false);\n  };\n\n  const captureAndDetect = async () => {\n    if (!videoRef.current || !canvasRef.current) return;\n\n    setProcessing(true);\n    try {\n      const video = videoRef.current;\n      const canvas = canvasRef.current;\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) throw new Error('Could not get canvas context');\n\n      // Capture frame\n      ctx.drawImage(video, 0, 0);\n\n      // For testing purposes, simulate detection\n      // Remove this and uncomment the Google Vision code for production\n      setTimeout(() => {\n        const mockIngredients = ['tomato', 'onion', 'garlic'];\n        onIngredientsDetected(mockIngredients);\n        setProcessing(false);\n        stopCamera();\n      }, 2000);\n\n      /* Uncomment for actual Google Vision API usage\n      const blob = await new Promise<Blob>((resolve) => {\n        canvas.toBlob((b) => resolve(b!), 'image/jpeg', 0.8);\n      });\n\n      const detectedIngredients = await analyzeImageWithGoogleVision(blob);\n      onIngredientsDetected(detectedIngredients);\n      */\n      \n    } catch (err) {\n      console.error('Error during capture:', err);\n      alert('Error capturing image. Please try again.');\n    } finally {\n      setProcessing(false);\n      stopCamera();\n    }\n  };\n\n  const handlePermissionError = () => {\n    if (permissionDenied) {\n      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\n      return (\n        <div className=\"mt-4 p-4 rounded-lg bg-red-50 border border-red-200\">\n          <p className=\"text-red-700 font-medium mb-2\">Camera access was denied</p>\n          {isIOS ? (\n            <ol className=\"text-sm text-red-600 list-decimal pl-4 space-y-1\">\n              <li>Open iPhone Settings</li>\n              <li>Scroll down and tap Safari</li>\n              <li>Scroll to \"Settings for Websites\"</li>\n              <li>Tap Camera</li>\n              <li>Find this website and select \"Allow\"</li>\n              <li>Return to this page and refresh</li>\n            </ol>\n          ) : (\n            <p className=\"text-sm text-red-600\">\n              Please enable camera access in your browser settings and reload the page\n            </p>\n          )}\n          <button\n            onClick={() => window.location.reload()}\n            className=\"mt-3 px-4 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors\"\n          >\n            Refresh Page\n          </button>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  return (\n    <div className=\"w-full\">\n      <canvas ref={canvasRef} style={{ display: 'none' }} />\n      \n      {isCapturing ? (\n        <div className=\"relative\">\n          <div className=\"aspect-video bg-gray-800 rounded-lg overflow-hidden\">\n            <video \n              ref={videoRef}\n              autoPlay \n              playsInline\n              muted // Required for iOS\n              className=\"w-full h-full object-cover\"\n            />\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              <div className=\"w-24 h-24 rounded-full border-4 border-white opacity-50\"></div>\n            </div>\n          </div>\n          <div className=\"absolute bottom-4 left-0 right-0 flex justify-center space-x-4\">\n            <button\n              onClick={stopCamera}\n              className=\"p-3 rounded-full bg-red-500 text-white hover:bg-red-600\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={captureAndDetect}\n              disabled={processing}\n              className=\"p-3 rounded-full text-white hover:opacity-90\"\n              style={{\n                backgroundColor: processing ? '#B7B7A4' : '#6B705C'\n              }}\n            >\n              {processing ? 'Detecting...' : 'Capture'}\n            </button>\n          </div>\n        </div>\n      ) : (\n        <>\n          <button\n            onClick={startCamera}\n            className=\"flex items-center justify-center w-full p-3 rounded-lg space-x-2 transition-all hover:scale-105\"\n            style={{ backgroundColor: '#B7B7A4' }}\n          >\n            <Camera className=\"w-6 h-6\" />\n            <span>Scan Ingredients</span>\n          </button>\n          {handlePermissionError()}\n        </>\n      )}\n\n      {processing && (\n        <div className=\"mt-4 flex items-center justify-center space-x-2 p-4 rounded-lg\" \n             style={{ backgroundColor: '#FFE8D6' }}>\n          <div className=\"w-4 h-4 rounded-full bg-gray-600 animate-pulse\"></div>\n          <div className=\"w-4 h-4 rounded-full bg-gray-600 animate-pulse delay-100\"></div>\n          <div className=\"w-4 h-4 rounded-full bg-gray-600 animate-pulse delay-200\"></div>\n          <span className=\"ml-2 text-gray-800\">Processing image...</span>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CameraDetection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}